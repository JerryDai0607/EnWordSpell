{"version":3,"sources":["../../../../../assets/Scripts/Views/assets/Scripts/Views/TipView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/Scripts/Views","sourcesContent":["\n\nimport Events from '../Misc/Events';\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class TipView extends cc.Component {\n\tbackground: cc.Node = null;\n\tlabel: cc.Label = null;\n\n\tshowing: boolean = false;\n\ttimer = null;\n\n\tonLoad() {\n\t\tthis.background = this.node.getChildByName('BG');\n\t\tthis.label = this.node.getChildByName('Label').getComponent(cc.Label);\n\t\twhevent.on(Events.TIP, this.onTip, this);\n\t\tthis.node.on(cc.Node.EventType.TOUCH_START, this.onTouch, this);\n\t\tthis.node.active = false;\n\t}\n\n\tonDestroy() {\n\t\twhevent.off(Events.TIP, this.onTip, this);\n\t\tthis.node.off(cc.Node.EventType.TOUCH_START, this.onTouch, this);\n\t}\n\n\tonTouch(){\n\n\t}\n\n\tonTip(data) {\n\t\tif (!data || !data.message) {\n\t\t\tthis.hide();\n\t\t} else {\n\t\t\tlet time = 2000;\n\t\t\tif (data.time !== undefined) {\n\t\t\t\ttime = data.time;\n\t\t\t}\n\t\t\tthis.show(data.message, time);\n\t\t}\n\t}\n\n\tshow(message, time) {\n\t\tthis.showing = true;\n\t\tthis.node.active = true;\n\t\tthis.label.string = message;\n\t\tWheen.stop(this.background);\n\t\tnew Wheen(this.background).to({ opacity: 180 }, 200).start();\n\n\t\tWheen.stop(this.label.node);\n\t\tnew Wheen(this.label.node).to({ opacity: 255 }, 200).start();\n\n\t\tif (this.timer) {\n\t\t\tclearTimeout(this.timer);\n\t\t}\n\t\tif (time > 0) {\n\t\t\tthis.timer = setTimeout(this.hide.bind(this), time);\n\t\t}\n\t}\n\n\thide() {\n\t\tthis.showing = false;\n\t\tWheen.stop(this.background);\n\t\tnew Wheen(this.background).to({ opacity: 0 }, 200).start();\n\n\t\tWheen.stop(this.label.node);\n\t\tnew Wheen(this.label.node)\n\t\t\t.to({ opacity: 0 }, 200)\n\t\t\t.callFunc(() => {\n\t\t\t\tthis.node.active = false;\n\t\t\t})\n\t\t\t.start();\n\t}\n}\n"]}