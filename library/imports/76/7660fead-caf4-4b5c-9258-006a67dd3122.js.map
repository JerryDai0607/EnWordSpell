{"version":3,"sources":["../../../../../assets/Scripts/Managers/assets/Scripts/Managers/HexagonManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/Scripts/Managers","sourcesContent":["\r\nimport Hexagon from '../Components/Hexagon';\r\nimport Events from '../Misc/Events';\r\nimport WordManager from './WordManager';\r\nimport Config from './Config';\r\nimport Server from './Server';\r\nimport Signal from '../Misc/Signal';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HexagonManager extends cc.Component {\r\n\t@property(cc.Prefab)\r\n\thexagonPrefab: cc.Prefab = null;\r\n\r\n\t@property(cc.Node)\r\n\thexagonContainer: cc.Node = null;\r\n\r\n\tstatic $: HexagonManager = null;\r\n\r\n\thexagons: cc.Node[] = [];\r\n\thexagonMap: cc.Node[][] = [];\r\n\tletters: string = '';\r\n\r\n\tgap: number = 0;\r\n\tlayers: number = 5;\r\n\r\n\t_totalColumns: number = 0;\r\n\t_hexagonWidth: number = 0;\r\n\t_hexagonHeight: number = 0;\r\n\t_distX: number = 0;\r\n\t_distY: number = 0;\r\n\r\n\thexagonChain: cc.Node[] = [];\r\n\r\n\tonline: boolean = false;\r\n\r\n\tstatic layerTotals = [0, 1, 7, 19, 37, 61, 91];\r\n\r\n\tcontrollable: boolean = false;\r\n\r\n\tonLoad() {\r\n\t\tHexagonManager.$ = this;\r\n\t\tthis.node.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n\t\tthis.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n\t\tthis.node.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\r\n\t\tthis.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchEnd, this);\r\n\t\twhevent.on(Events.GAME_START, this.onGameStart, this);\r\n\t\twhevent.on(Events.WRONG, this.onWrong, this);\r\n\t\twhevent.on(Events.CORRECT, this.onCorrect, this);\r\n\r\n\t\tif (!this.hexagonContainer) {\r\n\t\t\tthis.hexagonContainer = this.node;\r\n\t\t}\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.node.off(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n\t\tthis.node.off(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n\t\tthis.node.off(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\r\n\t\tthis.node.off(cc.Node.EventType.TOUCH_CANCEL, this.onTouchEnd, this);\r\n\t\twhevent.off(Events.GAME_START, this.onGameStart, this);\r\n\t\twhevent.off(Events.WRONG, this.onWrong, this);\r\n\t\twhevent.off(Events.CORRECT, this.onCorrect, this);\r\n\t}\r\n\r\n\tonLayerChange(layer: number) {\r\n\t\tif (layer === this.layers) return;\r\n\t\tthis.layers = layer;\r\n\t\tthis.buildHexagons();\r\n\t}\r\n\r\n\tonGapChange(gap: number) {\r\n\t\tif (gap === this.gap) return;\r\n\t\tthis.gap = gap;\r\n\t\tthis.buildHexagons();\r\n\t}\r\n\r\n\tonWrong({ ids, word }) {\r\n\t\tthis.controllable = true;\r\n\t\tids.forEach(id => {\r\n\t\t\tlet hexagon = this.getHexagonById(id);\r\n\t\t\tif (hexagon) {\r\n\t\t\t\thexagon.getComponent(Hexagon).deactivate(false);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.hexagonChain.length = 0;\r\n\t\tthis.chainUpdated();\r\n\t}\r\n\r\n\tonCorrect({ me, ids, word, letters }) {\r\n\t\tthis.controllable = true;\r\n\t\tlet arr = this.letters.split('');\r\n\t\tids.forEach((id, index) => {\r\n\t\t\tarr[id] = letters[index];\r\n\t\t\tlet hex = this.getHexagonById(id);\r\n\t\t\tif (hex) {\r\n\t\t\t\thex.getComponent(Hexagon).deactivate(true, letters[index], me);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.letters = arr.join('');\r\n\t\tif (me) {\r\n\t\t\tthis.hexagonChain.length = 0;\r\n\t\t\tthis.chainUpdated();\r\n\t\t} else {\r\n\t\t\tlet collided = false;\r\n\t\t\tlet myIds = [];\r\n\t\t\tthis.hexagonChain.forEach(hexagon => {\r\n\t\t\t\tmyIds.push(hexagon.getComponent(Hexagon).id);\r\n\t\t\t});\r\n\t\t\tfor (let id of ids) {\r\n\t\t\t\tif (myIds.indexOf(id) >= 0) {\r\n\t\t\t\t\tcollided = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(collided){\r\n\t\t\t\tthis.clearChain(true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonTouchStart(e: cc.Event.EventTouch) {\r\n\t\tif (!this.controllable) return;\r\n\t\tlet pos = this.node.convertToNodeSpaceAR(e.touch.getLocation());\r\n\t\tlet hexagon = this.getHexagonByPosition(pos);\r\n\t\tthis.addToChain(hexagon);\r\n\t}\r\n\r\n\tonTouchMove(e) {\r\n\t\tif (!this.controllable) return;\r\n\t\tlet pos = this.node.convertToNodeSpaceAR(e.touch.getLocation());\r\n\t\tlet hexagon = this.getHexagonByPosition(pos);\r\n\t\tthis.addToChain(hexagon);\r\n\t}\r\n\r\n\tonTouchEnd(e) {\r\n\t\tif (!this.controllable) return;\r\n\t\tthis.clearChain();\r\n\t}\r\n\r\n\tclearChain(force?: boolean) {\r\n\t\tif (force || this.hexagonChain.length <= 2) {\r\n\t\t\tthis.hexagonChain.forEach(hexagon => {\r\n\t\t\t\thexagon.getComponent(Hexagon).deactivate();\r\n\t\t\t});\r\n\t\t\tthis.hexagonChain.length = 0;\r\n\t\t\tthis.chainUpdated();\r\n\t\t} else {\r\n\t\t\tthis.controllable = false;\r\n\t\t\tif (!this.online) {\r\n\t\t\t\tlet text = '';\r\n\t\t\t\tthis.hexagonChain.forEach(hexagon => {\r\n\t\t\t\t\ttext += hexagon.getComponent(Hexagon).content;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlet isWord = WordManager.$.isWord(text.toLowerCase());\r\n\t\t\t\tlet ids = [];\r\n\t\t\t\tthis.hexagonChain.forEach(hexagon => {\r\n\t\t\t\t\tids.push(hexagon.getComponent(Hexagon).id);\r\n\t\t\t\t});\r\n\t\t\t\tif (isWord) {\r\n\t\t\t\t\tlet letters = WordManager.$.generateRandomLetters2(ids);\r\n\t\t\t\t\tlet score = Config.scoreMap[text.length < Config.scoreMap.length ? text.length : Config.scoreMap.length - 1];\r\n\t\t\t\t\twhevent.emit(Events.CORRECT, { me: true, ids, word: text, letters, score });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet word = '';\r\n\t\t\t\t\tids.forEach(id => {\r\n\t\t\t\t\t\tword += this.letters[id];\r\n\t\t\t\t\t});\r\n\t\t\t\t\twhevent.emit(Events.WRONG, { ids, word });\r\n\t\t\t\t}\r\n\t\t\t\tthis.hexagonChain.length = 0;\r\n\t\t\t\tthis.chainUpdated();\r\n\t\t\t} else {\r\n\t\t\t\tlet ids = [];\r\n\t\t\t\tthis.hexagonChain.forEach(hexagon => {\r\n\t\t\t\t\tids.push(hexagon.getComponent(Hexagon).id);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tServer.$.send(Signal.VALIDATE, ids);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonGameStart({ online, text, level }) {\r\n\t\tthis.online = online;\r\n\t\tthis.letters = text;\r\n\t\tthis.layers = level + 4;\r\n\t\tthis.buildHexagons();\r\n\t\twhevent.emit(Events.TIP, { message: 'Game Start!', time: 1000 });\r\n\t\tthis.controllable = true;\r\n\t\tthis.clearChain();\r\n\t}\r\n\r\n\tbuildHexagons() {\r\n\t\tthis.hexagonContainer.destroyAllChildren();\r\n\t\tthis.hexagons = [];\r\n\t\tthis.hexagonMap = [];\r\n\r\n\t\tthis._hexagonWidth = 0;\r\n\t\tthis._hexagonHeight = 0;\r\n\t\tthis._distX = 0;\r\n\t\tthis._distY = 0;\r\n\t\tthis._totalColumns = (this.layers - 1) * 2 + 1;\r\n\r\n\t\tlet id = 0;\r\n\t\tfor (let column = 0; column < this._totalColumns; column++) {\r\n\t\t\tthis.hexagonMap[column] = [];\r\n\t\t\tlet columnTotal = this.layers + (column < this.layers - 1 ? column : (this.layers - 1) * 2 - column);\r\n\t\t\tfor (let row = 0; row < columnTotal; row++) {\r\n\t\t\t\tlet hexagon = cc.instantiate(this.hexagonPrefab);\r\n\t\t\t\thexagon.parent = this.hexagonContainer;\r\n\t\t\t\thexagon.width = 70 + 24 * (5 - this.layers);\r\n\t\t\t\thexagon.height = 70 + 24 * (5 - this.layers);\r\n\t\t\t\thexagon.getChildByName('Label').getComponent(cc.Label).fontSize = 45 + 15 * (5 - this.layers);\r\n\t\t\t\tthis.hexagons.push(hexagon);\r\n\t\t\t\tthis.hexagonMap[column].push(hexagon);\r\n\t\t\t\tif (!this._hexagonWidth) {\r\n\t\t\t\t\tthis._hexagonWidth = hexagon.width;\r\n\t\t\t\t\tthis._hexagonHeight = Math.sqrt(Math.pow(0.5 * this._hexagonWidth, 2) - Math.pow(0.5 * 0.5 * this._hexagonWidth, 2)) * 2;\r\n\t\t\t\t\tthis._distX = 0.75 * this._hexagonWidth + this.gap;\r\n\t\t\t\t\tthis._distY = this._hexagonHeight + this.gap;\r\n\t\t\t\t}\r\n\t\t\t\tlet x = -(this._distX * (this._totalColumns - 1)) * 0.5 + this._distX * column;\r\n\t\t\t\tlet y = -(this._distY * (columnTotal - 1)) * 0.5 + this._distY * row;\r\n\t\t\t\thexagon.zIndex = -y;\r\n\t\t\t\thexagon.getComponent(Hexagon).setPosition(new cc.Vec2(x, y));\r\n\t\t\t\tthis.initHexagon(hexagon, id, this.letters[id], column, row);\r\n\t\t\t\tid++;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tchainUpdated() {\r\n\t\twhevent.emit(Events.CHAIN, this.hexagonChain);\r\n\t}\r\n\r\n\tinitHexagon(hexagon: cc.Node, id: number, letter: string, column: number, row: number) {\r\n\t\thexagon.getComponent(Hexagon).setId(id);\r\n\t\thexagon.getComponent(Hexagon).setColumnAndRow(column, row);\r\n\t\thexagon.getComponent(Hexagon).setContent(letter);\r\n\t}\r\n\r\n\taddToChain(hexagon: cc.Node) {\r\n\t\tif (!hexagon) return;\r\n\t\tlet index = this.hexagonChain.indexOf(hexagon);\r\n\r\n\t\tif (index < 0) {\r\n\t\t\tif (this.hexagonChain.length === 0 || this.isAdjacent(hexagon, this.hexagonChain[this.hexagonChain.length - 1])) {\r\n\t\t\t\tthis.hexagonChain.push(hexagon);\r\n\t\t\t\thexagon.getComponent(Hexagon).activate();\r\n\t\t\t}\r\n\t\t} else if (index < this.hexagonChain.length - 1) {\r\n\t\t\tfor (let i = index + 1; i < this.hexagonChain.length; i++) {\r\n\t\t\t\tthis.hexagonChain[i].getComponent(Hexagon).deactivate();\r\n\t\t\t}\r\n\t\t\tthis.hexagonChain.splice(index + 1);\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.chainUpdated();\r\n\t}\r\n\r\n\tgetHexagonById(id: number) {\r\n\t\treturn this.hexagons[id];\r\n\t}\r\n\r\n\tgetHexagonByCell(column: number, row: number) {\r\n\t\tif (this.hexagonMap[column]) {\r\n\t\t\treturn this.hexagonMap[column][row];\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tgetHexagonByPosition(pos: cc.Vec2) {\r\n\t\treturn this.hexagons.find(hexagon => Math.sqrt(Math.pow(hexagon.x - pos.x, 2) + Math.pow(hexagon.y - pos.y, 2)) <= this._distY * 0.5);\r\n\t}\r\n\r\n\tisAdjacent(hex1: cc.Node, hex2: cc.Node) {\r\n\t\tlet dist = Utils.distance(hex1.getPosition(), hex2.getPosition());\r\n\t\treturn dist <= this._distY * 1.5;\r\n\t}\r\n}\r\n"]}