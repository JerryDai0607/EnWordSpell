{"version":3,"sources":["PlayerTag.ts"],"names":[],"mappings":";;;;;AACA,yCAAoC;AAE9B,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAG5C;IAAuC,6BAAY;IADnD;QAAA,qEAiDC;QA/CA,eAAS,GAAa,IAAI,CAAC;QAC3B,gBAAU,GAAa,IAAI,CAAC;QAM5B,QAAE,GAAY,KAAK,CAAC;QACpB,WAAK,GAAW,CAAC,CAAC;;IAuCnB,CAAC;kBAhDoB,SAAS;IAW7B,0BAAM,GAAN;QACC,OAAO,CAAC,EAAE,CAAC,gBAAM,CAAC,UAAU,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAA;QACrD,OAAO,CAAC,EAAE,CAAC,gBAAM,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAA;QAChD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QAC7E,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QAC3E,IAAG,IAAI,CAAC,EAAE,EAAC;YACV,WAAS,CAAC,EAAE,GAAG,IAAI,CAAC;SACpB;aAAI;YACJ,WAAS,CAAC,QAAQ,GAAG,IAAI,CAAC;SAC1B;IACF,CAAC;IAED,6BAAS,GAAT;QACC,OAAO,CAAC,GAAG,CAAC,gBAAM,CAAC,UAAU,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAA;QACtD,OAAO,CAAC,GAAG,CAAC,gBAAM,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAA;IAClD,CAAC;IAED,+BAAW,GAAX,UAAY,EAAQ;YAAP,kBAAM;QAClB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,IAAG,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,MAAM,EAAC;YACtB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SACzB;aAAI;YACJ,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SACxB;QACD,IAAI,CAAC,WAAW,EAAE,CAAC;IACpB,CAAC;IAED,6BAAS,GAAT,UAAU,EAAW;YAAV,UAAE,EAAE,gBAAK;QACnB,IAAG,EAAE,KAAK,IAAI,CAAC,EAAE,EAAC;YACjB,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC;YACpB,IAAI,CAAC,WAAW,EAAE,CAAC;SACnB;IACF,CAAC;IAED,+BAAW,GAAX;QACC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;IAC1C,CAAC;;IA3CM,YAAE,GAAc,IAAI,CAAC;IACrB,kBAAQ,GAAc,IAAI,CAAC;IAGlC;QADC,QAAQ;yCACW;IARA,SAAS;QAD7B,OAAO;OACa,SAAS,CAgD7B;IAAD,gBAAC;CAhDD,AAgDC,CAhDsC,EAAE,CAAC,SAAS,GAgDlD;kBAhDoB,SAAS","file":"","sourceRoot":"../../../../../assets/Scripts/Components","sourcesContent":["\r\nimport Events from \"../Misc/Events\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PlayerTag extends cc.Component {\r\n\tnameLabel: cc.Label = null;\r\n\tscoreLabel: cc.Label = null;\r\n\r\n\tstatic me: PlayerTag = null;\r\n\tstatic opponent: PlayerTag = null;\r\n\r\n\t@property\r\n\tme: boolean = false;\r\n\tscore: number = 0;\r\n\r\n\tonLoad () {\r\n\t\twhevent.on(Events.GAME_START, this.onGameStart, this)\r\n\t\twhevent.on(Events.CORRECT, this.onCorrect, this)\r\n\t\tthis.nameLabel = this.node.getChildByName('Username').getComponent(cc.Label);\r\n\t\tthis.scoreLabel = this.node.getChildByName('Score').getComponent(cc.Label);\r\n\t\tif(this.me){\r\n\t\t\tPlayerTag.me = this;\r\n\t\t}else{\r\n\t\t\tPlayerTag.opponent = this;\r\n\t\t}\r\n\t}\r\n\r\n\tonDestroy(){\r\n\t\twhevent.off(Events.GAME_START, this.onGameStart, this)\r\n\t\twhevent.off(Events.CORRECT, this.onCorrect, this)\r\n\t}\r\n\r\n\tonGameStart({online}){\r\n\t\tthis.score = 0;\r\n\t\tif(!this.me && !online){\r\n\t\t\tthis.node.active = false;\r\n\t\t}else{\r\n\t\t\tthis.node.active = true;\r\n\t\t}\r\n\t\tthis.updateScore();\r\n\t}\r\n\r\n\tonCorrect({me, score}) {\r\n\t\tif(me === this.me){\r\n\t\t\tthis.score += score;\r\n\t\t\tthis.updateScore();\r\n\t\t}\r\n\t}\r\n\r\n\tupdateScore () {\r\n\t\tthis.scoreLabel.string = this.score + '';\r\n\t}\r\n}\r\n"]}